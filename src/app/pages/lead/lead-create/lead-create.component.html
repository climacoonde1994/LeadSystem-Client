<div class="wrapper">
  <div class="page">

      <div class="page-inner">
          <header class="page-title-bar mb-1">
              <nav aria-label="breadcrumb">
                  <ol class="breadcrumb">
                      <li class="breadcrumb-item active">
                          <a routerLink="/lead-system-list"><i class="breadcrumb-icon fa fa-angle-left mr-2"></i> Lead List </a>
                      </li>
                  </ol>
              </nav>
              <div class="row text-center text-sm-left h-100 mt-3">
                  <div class="col-sm-auto col-12">
                      <span class="tile tile-lg bg-info">
                        <i class="fas fa-address-book"></i>
                      </span>
                  </div>
                  <div class="col pl-1 justify-content-center align-self-center">
                    <span class="text-muted m-0"> Lead Management </span>
                    <h4 class="m-0"> Create Lead </h4>
                  </div>
              </div>
          </header>
          <div class="page-section">
            <form [formGroup]="modalFormGroup" autocomplete="off" novalidate  >
            <ul ngbNav #nav="ngbNav" [activeId]="activatedRoute.fragment | async" class="nav-tabs">
              <li ngbNavItem="lead">
                <a ngbNavLink routerLink="." fragment="lead">Lead</a>
                <ng-template ngbNavContent>
                  <div class="form-row">
                    <div class="col-md-12" *ngIf="errors">
                      <div class="alert alert-danger" role="alert">
                        <ul class="list-unstyled m-0">
                          <li *ngFor="let error of errors">{{ error }}</li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="card-body border-top card-header">
                    <div class="d-flex align-items-center">
                      <span class="mr-auto">Highlight</span>
                      <button class="btn btn-warning  mr-1  " routerLink="/lead-system-list">Cancel</button>
                      <button class="btn btn-success  mr-1  " (click)="saveLeadheader()">Save</button>
                    </div>
                  </div>
                  <div class="card-body">
                    <div class="form-row">
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="id"> Lead Number </label>
                          <div class="form-group">
                            <label for="id" class="ml-2 mt-2 font-weight-bold">System Generated </label>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="revNo"> Lead Date </label>
                          <input type="date" class="form-control" formControlName="LeadDate"   />
                        </div>
                      </div>  
                                            
                    </div>
                    <div class="form-row">
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="id"> Status </label>
                          <select class="form-control" name="status" >
                            <option  >Active</option>
                            <option  >Dead</option>
                            <option  >Sold</option>
                            <option  >Close</option>
                         </select>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="revNo"> Status Comment </label>
                          <select class="form-control" name="status" >
                            <option  >Active Lead</option>
                            <option  >Long Term</option>
                            <option  >Email Only</option>
                            <option  >Old Client</option>
                         </select>
                        </div>
                      </div>  

                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="revNo"> Makati TIme </label>
                          <input type="text" class="form-control" />
                        </div>
                      </div>  
                                         
                    </div>
                    <div class="form-row">
                      <div class="col-md-6">
                        <div class="form-group">
                          <label for="id"> Sales Person </label>
                          <ng-select appearance="outline" [searchable]="true"  labelForId="SalesPersonId" formControlName="SalesPersonId"   placeholder="Select Sales Person">
                            <ng-option *ngFor="let employee of employees" [value]="employee.EmployeeId">{{ employee.FullName }}</ng-option>
                          </ng-select>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="revNo"> Follow Up Date </label>
                          <input type="date" class="form-control" formControlName="FollowUpDate"   />
                        </div>
                      </div>  
                                           
                    </div>
                    <div class="form-row">
                      <div class="col-md-6">
                        <div class="form-group">
                          <label for="id"> Sales Person 2 </label>
                          <ng-select appearance="outline" [searchable]="true"  labelForId="SalesPersonId2" formControlName="SalesPersonId2"   placeholder="Select Sales Person 2">
                            <ng-option *ngFor="let employee of employees" [value]="employee.EmployeeId">{{ employee.FullName }}</ng-option>
                          </ng-select>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="revNo"> Follow Up Date 2 </label>
                          <input type="date" class="form-control" formControlName="FollowUpDate2" placeholder="Revision Number" />
                        </div>
                      </div>  
                     
                                           
                    </div>
                    <div class="form-row">
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="id"> Source </label>
                          <ng-select appearance="outline" [searchable]="true"  labelForId="SourceId" formControlName="SourceId"   placeholder="Select Source">
                            <ng-option *ngFor="let source of sources" [value]="source.SourceId">{{ source.Name }}</ng-option>
                          </ng-select>
                        
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="revNo"> Quality </label>
                          <select class="form-control" name="status" formControlName="Quality" >
                            <option  >Unknown</option>
                            <option  >Minor Importance</option>
                            <option  >Important Lead</option>
                            <option  >Routine Lead</option>
                            <option  >Hot</option>
                         </select>
                        </div>
                      </div>  
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="revNo"> Likelihood </label>
                          <select class="form-control" name="status" formControlName="Likelihood">
                            <option  >Unknown</option>
                            <option  >Normal</option>
                            <option  >Not Promising</option>
                            <option  >Promising</option>
                         </select>
                        </div>
                      </div>  
           
                    </div>
                    <div class="form-row">
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="id"> Meet Date </label>
                          <input type="date" class="form-control" formControlName="MeetDate" placeholder="System Generated"   />
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="revNo"> Time </label>
                          <input type="time" class="form-control" formControlName="Remarks" placeholder="Revision Number" />
                         
                        </div>
                      </div>  
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="myCheckbox"> </label>
                          <div class="checkbox-container col-md-12 mt-3">
                            <input type="checkbox" id="myCheckbox"  (change)="actionNeededChange($event)" [checked]="actionNeeded"  formControlName="ActionNeeded" class="mr-2"   >
                            <label for="myCheckbox">Action Needed</label>
                          </div> 
                        </div>
                      </div>                        
                    </div>
                    <div class="form-row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <label for="id"> Remarks </label>
                          <textarea class="form-control" name="" formControlName="Remarks"  cols="10" rows="5"></textarea>
                           
                        </div>
                      </div>
                                         
                    </div>
                  </div>
                  <div class="card-body border-top card-header">
                    <div class="d-flex align-items-center">
                      <span class="mr-auto">Specialty</span>
                    </div>
                  </div>
                  <div class="card-body">
                    <div class="form-row">
                      <div class="checkbox-container col-md-3">
                        <input type="checkbox" id="myCheckbox" name="myCheckbox" [checked]="webchecked" class="mr-2"   >
                        <label for="myCheckbox">WEB</label>
                        <div class="row">
                          <div class="column">
                            <div *ngFor="let webs of webspecialties ; index as i" class="checkbox-container col-md-12 ml-2">
                              <input type="checkbox" id="myCheckbox"  [checked]="webs.Select" (change)="fieldsChange($event,webs)" name="myCheckbox" class="mr-2"   >
                              <label for="myCheckbox">{{webs.Name}}</label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="checkbox-container col-md-3">
                        <input type="checkbox" id="myCheckbox" name="myCheckbox" [checked]="mobilechecked" class="mr-2">
                        <label for="myCheckbox">MOBILE</label>
                        <div class="row">
                          <div class="column">
                            <div *ngFor="let webs of mobilespecialties ; index as i" class="checkbox-container col-md-12 ml-2">
                              <input type="checkbox" id="myCheckbox"  [checked]="webs.Select" (change)="fieldsChange($event,webs)" name="myCheckbox" class="mr-2"   >
                              <label for="myCheckbox">{{webs.Name}}</label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="checkbox-container col-md-3">
                        <input type="checkbox" id="myCheckbox" name="myCheckbox"  [checked]="desktopchecked"  class="mr-2">
                        <label for="myCheckbox">DESKTOP</label>
                        <div class="row">
                          <div class="column">
                            <div *ngFor="let webs of desktopspecialties ; index as i" class="checkbox-container col-md-12 ml-2">
                              <input type="checkbox" id="myCheckbox"  [checked]="webs.Select" (change)="fieldsChange($event,webs)" name="myCheckbox" class="mr-2"   >
                              <label for="myCheckbox">{{webs.Name}}</label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="checkbox-container col-md-2">
                        <input type="checkbox" id="myCheckbox" name="myCheckbox" (change)="setCategoryCheck" [checked]="otherchecked" class="mr-2">
                        <label for="myCheckbox">OTHER</label>
                        <div class="row">
                          <div class="column">
                            <div *ngFor="let webs of otherspecialties ; index as i" (change)="fieldsChange($event,webs)" class="checkbox-container col-md-12 ml-2">
                              <input type="checkbox" id="myCheckbox"  [checked]="webs.Select" name="myCheckbox" class="mr-2"   >
                              <label for="myCheckbox">{{webs.Name}}</label>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
               
                </ng-template>
              </li>
              <li ngbNavItem="client">
                <a ngbNavLink routerLink="." fragment="client">Client</a>
                <ng-template ngbNavContent>
                  <div class="card-header">
                    <div class="d-flex align-items-center">
                      <span class="mr-auto">Client </span>
                      <button class="btn btn-warning  mr-1  " routerLink="/lead-system-list">Cancel</button>
                      <button class="btn btn-success  mr-1  " (click)="saveLeadheader()">Save</button>
                    </div>
                  </div>
                  <div class="card-body">
                    <div class="form-row">
                      <div class="col-md-4">
                        <label for="id"> Client Name </label>
                        <div class="form-group">
                        <div class="input-container">
                          <i class="fa fa-user icon "  (click)="openClientModal()"></i>
                          <label for="id" class="ml-2 mt-2 font-weight-bold"  > {{clientName}} </label>
                        </div>
                      </div>
                      </div>
                                         
                    </div>
                    <div class="form-row">
                      <div class="col-md-12">
                        <label for="Description"> Description </label>
                        <div class="form-group">
                          <input type="text" class="form-control" formControlName="Description" placeholder="Description"   />
                        </div>
                      </div>                        
                    </div>
                    <div class="form-row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <label for="id"> Address 1  </label>
                          <input type="text" class="form-control" formControlName="Address1" placeholder="Address 1"   />
                        </div>
                      </div>
                                         
                    </div>
                    <div class="form-row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <label for="id"> Address 2 </label>
                          <input type="text" class="form-control" formControlName="Address1" placeholder="Address 2"   />
                        </div>
                      </div>
                                         
                    </div>
                    <div class="form-row">
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="id"> City </label>
                          <input type="text" class="form-control" formControlName="City" readonly />
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="revNo"> Country </label>
                          <input type="textarea" class="form-control" formControlName="Country" placeholder="Description" />
                        </div>
                      </div> 
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="revNo"> ZIP </label>
                          <input type="textarea" class="form-control" formControlName="ZIP" placeholder="Description" />
                        </div>
                      </div>                           
                    </div>
                    <div class="form-row">
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="id"> Phone </label>
                          <input type="text" class="form-control" formControlName="Phone" placeholder="System Generated" readonly />
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="revNo"> FAX </label>
                          <input type="textarea" class="form-control" formControlName="FAX" placeholder="Description" />
                        </div>
                      </div> 
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="revNo"> URL </label>
                          <input type="textarea" class="form-control" formControlName="URL" placeholder="Description" />
                        </div>
                      </div>                           
                    </div>
                    
                  </div>
                  <div class="card-body border-top card-header">
                    <div class="d-flex align-items-center">
                      <span class="mr-auto">Contact List</span>
                    </div>
                  </div>
                  <div class="card-body">
                    <div class="form-row">
                      <div class="page-section">
                        <table class="table table-striped">
                          <thead>
                            <tr>
                              <th class="align-middle" style="width: 5%" scope="col" sortable="code">Salutation</th>
                              <th class="align-middle" style="width: 15%" scope="col" sortable="code">First Name</th>
                              <th class="align-middle" style="width: 15%" scope="col" sortable="code">Last Name</th>
                              <th class="align-middle" style="width: 5%" scope="col" sortable="code">Status</th>
                              <th class="align-middle" style="width: 10%" scope="col" sortable="code">Department</th>
                              <th class="align-middle" style="width: 10%" scope="col" sortable="code">Type</th>
                              <th class="align-middle" style="width: 20%" scope="col" sortable="code">Email</th>
                              <th class="align-middle" style="width: 20%" scope="col" sortable="code">Remarks</th>
                              <th class="align-middle" style="width: 5%" scope="col" sortable="code"><button class="btn btn-info ml-auto" (click)="openLeadContactModal()"><i class="fas fa-plus"></i></button></th>
                          
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let leadcontact of leadcontacts ; index as i">
                              <td class="align-middle">{{leadcontact.Salutation}}<ngb-highlight></ngb-highlight></td>
                              <td class="align-middle">{{leadcontact.FirstName}}<ngb-highlight></ngb-highlight></td>
                              <td class="align-middle">{{leadcontact.LastName}}<ngb-highlight></ngb-highlight></td>
                              <td class="align-middle">{{leadcontact.Status}}<ngb-highlight></ngb-highlight></td>
                              <td class="align-middle">{{leadcontact.Department}}<ngb-highlight></ngb-highlight></td>
                              <td class="align-middle">{{leadcontact.SystemType}}<ngb-highlight></ngb-highlight></td>
                              <td class="align-middle">{{leadcontact.Email}}<ngb-highlight></ngb-highlight></td>
                              <td class="align-middle">{{leadcontact.Remarks}}<ngb-highlight></ngb-highlight></td>
                              <td class="align-middle">  
                                <button class="btn btn-info ml-auto mr-1" (click)="deleteContact(i)"><i class="fas fa-trash"></i></button> 
                                <ngb-highlight></ngb-highlight>
                              </td>
                            </tr>
                           
                          </tbody>
                        </table>
              
                       
                      </div>              
                    </div>
                  </div>
                </ng-template>
              </li>
              <li ngbNavItem="notes">
                <a ngbNavLink routerLink="." fragment="notes">Notes</a>
                <ng-template ngbNavContent>
                  <div class="card-body border-top card-header">
                    <div class="d-flex align-items-center">
                      <span class="mr-auto">Notes</span>
                      <button class="btn btn-warning  mr-1  " routerLink="/lead-system-list">Cancel</button>
                      <button class="btn btn-success  mr-1  " (click)="saveLeadheader()">Save</button>
                    </div>
                  </div>
                  <div class="card-body">
                    <div class="form-row">
                      <div class="page-section">
                        <table class="table table-striped">
                          <thead>
                            <tr>
                              <th class="align-middle" style="width: 10%" scope="col" sortable="code"  >Date</th>
                              <th class="align-middle" style="width: 65%" scope="col" sortable="code"  >Running Commentary on what is going on in this lead  </th>
                              <th class="align-middle" style="width: 15%" scope="col" sortable="code"  >Author  </th>
                              <th class="align-middle" style="width: 10%" scope="col" sortable="code"><button class="btn btn-info ml-auto" (click)="openNotesModal()"><i class="fas fa-plus"></i></button></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let note of notes">
                              <td class="align-middle">{{note.Date  | date}}<ngb-highlight></ngb-highlight></td>
                              <td class="align-middle">{{note.Description}}<ngb-highlight></ngb-highlight></td>
                              <td class="align-middle">{{note.Author}}<ngb-highlight></ngb-highlight></td>
                              <td class="align-middle"><ngb-highlight></ngb-highlight></td>
                            </tr>
                          </tbody>
                        </table>
              
                       
                      </div>              
                    </div>
                  </div>
                </ng-template>
              </li>
              <li ngbNavItem="attachments">
                <a ngbNavLink routerLink="." fragment="attachments">Attachments</a>
                <ng-template ngbNavContent>
                    
                  <div class="card-body border-top card-header">
                    <div class="d-flex align-items-center">
                      <span class="mr-auto">Attachment</span>
                      <button class="btn btn-warning  mr-1  " routerLink="/lead-system-list">Cancel</button>
                      <button class="btn btn-success  mr-1  " (click)="saveLeadheader()">Save</button>
                    </div>
                  </div>
                  <div class="card-body">
                    <div class="form-row">
                      <div class="page-section">
                        <table class="table table-striped">
                          <thead>
                            <tr>
                              <th class="align-middle" style="width: 75%" scope="col" sortable="code">Proposal</th>
                              <th class="align-middle" style="width: 15%" scope="col" sortable="code"><button class="btn btn-info ml-auto" (click)="openProposalModal()"><i class="fas fa-plus"></i></button></th>
                          
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let proposal of proposals; index as i">
                              <td class="align-middle">{{proposal.Proposal}}<ngb-highlight></ngb-highlight></td>
                              <td class="align-middle">  
                                <button class="btn btn-info ml-auto mr-1" (click)="deleteProposal(i)"><i class="fas fa-trash"></i></button>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>              
                    </div>

                    <div class="form-row">
                      <div class="page-section">
                        <table class="table table-striped">
                          <thead>
                            <tr>
                              <th class="align-middle" style="width: 75%" scope="col" sortable="code">Document</th>
                              <th class="align-middle" style="width: 15%" scope="col" sortable="code"><button class="btn btn-info ml-auto" (click)="openDocumentModal()"><i class="fas fa-plus"></i></button></th>
                          
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                            </tr>
                            <tr *ngFor="let document of documents; index as i">
                              <td class="align-middle">{{document.FileName}}<ngb-highlight></ngb-highlight></td>
                              <td class="align-middle"> <button class="btn btn-info ml-auto mr-1" (click)="deleteDocument(i)"><i class="fas fa-trash"></i></button></td>
                               
                            </tr>
                             
                  
                          </tbody>
                        </table>
              
                       
                      </div>              
                    </div>
                    <div class="form-row">
                      <div class="page-section">
                        <table class="table table-striped">
                          <thead>
                            <tr>
                              <th class="align-middle" style="width: 75%" scope="col" sortable="code">Cut and Paste</th>
                              <th class="align-middle" style="width: 15%" scope="col" sortable="code"><button class="btn btn-info ml-auto" (click)="openCutPasteModal()"><i class="fas fa-plus"></i></button></th>
                          
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let cutpaste of cutpastes; index as i">
                              <td class="align-middle">{{cutpaste.Title}}<ngb-highlight></ngb-highlight></td>
                              <td></td>
                            </tr>
                          </tbody>
                        </table>
              
                       
                      </div>              
                    </div>

                    <div class="form-row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <label for="id"> Internet Contact List  </label>
                          <textarea class="form-control" name="" formControlName="InternetContactList"  cols="10" rows="5"></textarea>

                        </div>
                      </div>
                                         
                    </div>
                    <div class="form-row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <label for="id"> Action Notes Needed  </label>
                          <textarea class="form-control" name="" formControlName="ActionNeededNotes"  cols="10" rows="5"></textarea>
                           
                        </div>
                      </div>
                                         
                    </div>
                    <div class="form-row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <label for="id"> Internet Notes  </label>
                          <textarea class="form-control" name="" formControlName="InternetNotes"  cols="10" rows="5"></textarea>
                           
                        </div>
                      </div>
                                         
                    </div>
                  </div>
                </ng-template>
              </li>
              
            </ul>
          </form>
  
            <div [ngbNavOutlet]="nav" class="mt-3"></div>
          </div>
       

       
    </div>
  </div>
</div>
